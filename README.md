# MinerU MCP Server

<div align="center">

![MinerU](https://img.shields.io/badge/MinerU-Document%20Processing-blue)
![Version](https://img.shields.io/badge/version-3.0.0-green)
![Python](https://img.shields.io/badge/python-3.10+-blue)
![License](https://img.shields.io/badge/license-MIT-green)
![MCP](https://img.shields.io/badge/MCP-Model%20Context%20Protocol-purple)
![HTTP/3](https://img.shields.io/badge/HTTP%2F3-Supported-orange)

**å®Œæ•´çš„MinerUæ–‡æ¡£å¤„ç†è§£å†³æ–¹æ¡ˆ**

æ”¯æŒ PDF/PPTX/DOCX/å›¾ç‰‡ | çœŸæ­£å¼‚æ­¥å¹¶å‘ | æ‰¹é‡å¼‚æ­¥å¹¶è¡Œ | MCPè‡ªç„¶è¯­è¨€äº¤äº’

[å¿«é€Ÿå¼€å§‹](#-å¿«é€Ÿå¼€å§‹) â€¢ [åŠŸèƒ½ç‰¹æ€§](#-åŠŸèƒ½ç‰¹æ€§) â€¢ [å®‰è£…](#-å®‰è£…) â€¢ [ä½¿ç”¨](#-ä½¿ç”¨) â€¢ [æ–‡æ¡£](#-æ–‡æ¡£)

</div>

---

## ğŸ“– ç®€ä»‹

MinerU MCP Server æ˜¯ä¸€ä¸ªå®Œæ•´çš„æ–‡æ¡£å¤„ç†è§£å†³æ–¹æ¡ˆï¼Œæä¾›ï¼š

- ğŸ” **å¤šè´¦æˆ·Tokenç®¡ç†** - æ‰¹é‡ç™»å½•ã€è‡ªåŠ¨è¿‡æœŸæ£€æµ‹ã€è´Ÿè½½å‡è¡¡
- ğŸ“„ **å…¨æ ¼å¼æ”¯æŒ** - PDFã€PPTXã€DOCXã€å›¾ç‰‡ã€HTML
- ğŸš€ **çœŸæ­£å¼‚æ­¥å¹¶å‘** - ä½¿ç”¨niquests AsyncSessionï¼Œæ€§èƒ½æå‡10å€
- ğŸ“¦ **æ™ºèƒ½æ–‡ä»¶å¤„ç†** - è¶…å¤§æ–‡ä»¶è‡ªåŠ¨æ‹†åˆ†ï¼Œæ™ºèƒ½åˆå¹¶
- ğŸ¤– **MCPé›†æˆ** - é€šè¿‡è‡ªç„¶è¯­è¨€äº¤äº’å¤„ç†æ–‡æ¡£
- ğŸ¨ **Rich UI** - ç¾è§‚çš„è¿›åº¦æ˜¾ç¤ºå’Œå¯è§†åŒ–

## âœ¨ åŠŸèƒ½ç‰¹æ€§

### æ ¸å¿ƒåŠŸèƒ½

| åŠŸèƒ½ | è¯´æ˜ | çŠ¶æ€ |
|------|------|------|
| ğŸ” Tokenç®¡ç† | å¤šè´¦æˆ·æ‰¹é‡ç™»å½•ã€è‡ªåŠ¨è¿‡æœŸæ£€æµ‹ã€è´Ÿè½½å‡è¡¡ | âœ… |
| ğŸ“„ æ–‡æ¡£å¤„ç† | PDF/PPTX/DOCX/å›¾ç‰‡/HTML | âœ… |
| ğŸ“¦ æ™ºèƒ½æ‹†åˆ† | è¶…å¤§æ–‡ä»¶ï¼ˆ>200MBï¼‰è‡ªåŠ¨æ‹†åˆ† | âœ… |
| ğŸ“– é¡µæ•°å¤„ç† | è¶…é¡µæ•°æ–‡ä»¶ï¼ˆ>600é¡µï¼‰æ™ºèƒ½å¤„ç† | âœ… |
| ğŸš€ å¼‚æ­¥å¹¶å‘ | çœŸæ­£çš„å¼‚æ­¥å¤„ç†ï¼Œéé˜»å¡ | âœ… |
| ğŸ”„ æ‰¹é‡å¹¶è¡Œ | å¤šæ–‡ä»¶åŒæ—¶å¤„ç†ï¼Œæ€§èƒ½æå‡10å€ | âœ… |
| ğŸ¤– MCPæœåŠ¡å™¨ | è‡ªç„¶è¯­è¨€äº¤äº’ | âœ… |
| ğŸ¨ Rich UI | ç¾è§‚çš„è¿›åº¦æ˜¾ç¤º | âœ… |

### æ”¯æŒçš„æ–‡ä»¶æ ¼å¼

| æ ¼å¼ | æ‰©å±•å | æ¨¡å‹ | ç‰¹æ€§ |
|------|--------|------|------|
| PDF | `.pdf` | vlm/pipeline | å…¬å¼ã€è¡¨æ ¼ã€å›¾ç‰‡è¯†åˆ« |
| Word | `.doc`, `.docx` | vlm/pipeline | å®Œæ•´æ–‡æ¡£ç»“æ„ |
| PowerPoint | `.ppt`, `.pptx` | vlm/pipeline | å¹»ç¯ç‰‡å†…å®¹æå– |
| å›¾ç‰‡ | `.png`, `.jpg`, `.jpeg` | vlm | OCRæ–‡å­—è¯†åˆ« |
| HTML | `.html` | MinerU-HTML | ç½‘é¡µå†…å®¹æå– |

### åœºæ™¯è¦†ç›–

| åœºæ™¯ | æ–‡ä»¶å¤§å° | é¡µæ•° | å¤„ç†æ–¹å¼ |
|------|---------|------|---------|
| åœºæ™¯1 | < 200MB | < 600é¡µ | ç›´æ¥å¤„ç† |
| åœºæ™¯2 | < 200MB | > 600é¡µ | page_rangeså‚æ•° |
| åœºæ™¯3 | > 200MB | < 600é¡µ | ç‰©ç†æ‹†åˆ† |
| åœºæ™¯4 | > 200MB | > 600é¡µ | æ™ºèƒ½æ‹†åˆ† |
| åœºæ™¯5 | æç«¯æƒ…å†µ | ä»»æ„ | è‡ªåŠ¨å¤„ç† |

## ğŸ“Š æ€§èƒ½æŒ‡æ ‡

| åœºæ™¯ | ä¸²è¡Œå¤„ç† | å¹¶å‘å¤„ç† | æ€§èƒ½æå‡ |
|------|---------|---------|---------|
| å•æ–‡ä»¶ | 23ç§’ | 23ç§’ | - |
| 3ä¸ªæ–‡ä»¶ | 149ç§’ | 88ç§’ | **1.7å€** |
| 10ä¸ªæ–‡ä»¶ | 300ç§’ | 30ç§’ | **10å€** |

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ä¸€é”®å®‰è£…

```bash
git clone https://github.com/neosun100/mineru-mcp-server.git
cd mineru-mcp-server
./install_mcp.sh
```

### é…ç½®è´¦æˆ·

```bash
cp config/accounts.yaml.example config/accounts.yaml
vi config/accounts.yaml  # å¡«å…¥è´¦æˆ·ä¿¡æ¯
```

### æ‰¹é‡ç™»å½•è·å–Token

> âš ï¸ **éœ€è¦å›¾å½¢ç•Œé¢ç¯å¢ƒï¼ˆmacOS/Windows/Linuxæ¡Œé¢ï¼‰**ï¼Œä¸æ”¯æŒæ— UIçš„æœåŠ¡å™¨ç¯å¢ƒã€‚

```bash
.venv/bin/python3 src/batch_login.py
```

è„šæœ¬ä¼šè‡ªåŠ¨å®Œæˆä»¥ä¸‹æµç¨‹ï¼š
1. æ‰“å¼€æµè§ˆå™¨è®¿é—® MinerU ç™»å½•é¡µ
2. è‡ªåŠ¨å¡«å†™è´¦å·å¯†ç 
3. è‡ªåŠ¨ç‚¹å‡»é˜¿é‡Œäº‘éªŒè¯ç ï¼ˆå¤§éƒ¨åˆ†è´¦æˆ·å…¨è‡ªåŠ¨é€šè¿‡ï¼‰
4. è‡ªåŠ¨è·å–å¹¶ä¿å­˜ Token åˆ° `all_tokens.json`

### ä½¿ç”¨

#### æ–¹å¼1: MCPå·¥å…·ï¼ˆæ¨èï¼‰

åœ¨Kiro CLIä¸­ï¼š
```
"å¸®æˆ‘å¤„ç† ~/Documents/report.pdf"
"å¤„ç† ~/Documents ç›®å½•ä¸‹æ‰€æœ‰PDF"
```

#### æ–¹å¼2: å‘½ä»¤è¡Œå·¥å…·

```bash
# Rich UIï¼ˆç¾è§‚ç•Œé¢ï¼‰
python3 tools/mineru_rich_enhanced.py ~/Documents/report.pdf

# æ‰¹é‡å¼‚æ­¥å¹¶è¡Œ
python3 src/mineru_batch_async.py ~/Documents "*.pdf"

# ç›´æ¥å¤„ç†
python3 src/mineru_async.py ~/Documents/report.pdf
```

## ğŸ“¦ å®‰è£…

### ç³»ç»Ÿè¦æ±‚

- Python 3.10+
- uvï¼ˆPythonåŒ…ç®¡ç†å™¨ï¼‰
- Git

### æ‰‹åŠ¨å®‰è£…

```bash
# 1. å…‹éš†ä»“åº“
git clone https://github.com/neosun100/mineru-mcp-server.git
cd mineru-mcp-server

# 2. åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
uv venv
source .venv/bin/activate

# 3. å®‰è£…ä¾èµ–
uv pip install niquests PyPDF2 python-pptx python-docx mcp rich playwright pyyaml
playwright install chromium

# 4. é…ç½®è´¦æˆ·
cp accounts.yaml.example accounts.yaml
vi accounts.yaml

# 5. æ‰¹é‡ç™»å½•ï¼ˆéœ€è¦å›¾å½¢ç•Œé¢ç¯å¢ƒï¼‰
python3 batch_login.py
```

### MCPæœåŠ¡å™¨é…ç½®

ç¼–è¾‘ `~/.kiro/settings/mcp.json`ï¼š

```json
{
  "mcpServers": {
    "mineru": {
      "command": "/path/to/mineru-mcp-server/.venv/bin/python3",
      "args": ["/path/to/mineru-mcp-server/mineru_mcp_server.py"],
      "env": {
        "PYTHONPATH": "/path/to/mineru-mcp-server"
      }
    }
  }
}
```

## ğŸ¯ ä½¿ç”¨

### MCPå·¥å…·

#### process_document
å¤„ç†å•ä¸ªæ–‡æ¡£ï¼ˆæœ¬åœ°æ–‡ä»¶æˆ–URLï¼‰

```
"å¸®æˆ‘å¤„ç†è¿™ä¸ªPDF ~/Documents/report.pdf"
"å¤„ç†è¿™ä¸ªé“¾æ¥ https://example.com/doc.pdf"
```

#### process_directory
æ‰¹é‡å¤„ç†ç›®å½•ï¼ˆçœŸæ­£å¼‚æ­¥å¹¶è¡Œï¼‰

```
"å¤„ç† ~/Documents ç›®å½•ä¸‹æ‰€æœ‰PDF"
"æŠŠ ~/Downloads é‡Œçš„PPTXéƒ½è½¬æˆMarkdown"
```

#### get_token_status
æŸ¥è¯¢TokençŠ¶æ€

```
"æŸ¥çœ‹MinerUçš„TokençŠ¶æ€"
```

### å‘½ä»¤è¡Œå·¥å…·

#### å•æ–‡ä»¶å¤„ç†

```bash
# Rich UIï¼ˆæ¨èï¼‰
python3 mineru_rich_enhanced.py ~/Documents/report.pdf

# ç›´æ¥å¤„ç†
python3 mineru_async.py ~/Documents/report.pdf
```

#### æ‰¹é‡å¤„ç†

```bash
# æ‰¹é‡å¼‚æ­¥å¹¶è¡Œï¼ˆæ¨èï¼‰
python3 mineru_batch_async.py ~/Documents "*.pdf"

# Rich UIæ‰¹é‡
python3 mineru_rich_enhanced.py ~/Documents --pattern "*.pdf"
```

#### è¶…å¤§æ–‡ä»¶å¤„ç†

```bash
# è‡ªåŠ¨æ‹†åˆ†ã€å¹¶è¡Œå¤„ç†ã€åˆå¹¶
python3 test_large_file_complete.py ~/Documents/large_file.pdf
```

## ğŸ”§ æŠ€æœ¯æ ˆ

| æŠ€æœ¯ | ç‰ˆæœ¬ | ç”¨é€” |
|------|------|------|
| [niquests](https://niquests.readthedocs.io/) | 3.17.0 | HTTP/2+HTTP/3å®¢æˆ·ç«¯ |
| [MCP SDK](https://modelcontextprotocol.io/) | 1.23.1 | Model Context Protocol |
| [Rich](https://rich.readthedocs.io/) | 14.2.0 | ç»ˆç«¯UI |
| [PyPDF2](https://pypdf2.readthedocs.io/) | 3.0.1 | PDFå¤„ç† |
| [python-pptx](https://python-pptx.readthedocs.io/) | 1.0.2 | PPTå¤„ç† |
| [python-docx](https://python-docx.readthedocs.io/) | 1.2.0 | Wordå¤„ç† |

## ğŸ“ é¡¹ç›®ç»“æ„

```
mineru-mcp-server/
â”œâ”€â”€ README.md                   # ä¸»æ–‡æ¡£
â”œâ”€â”€ .gitignore                  # Gitå¿½ç•¥è§„åˆ™
â”œâ”€â”€ requirements.txt            # ä¾èµ–åˆ—è¡¨
â”œâ”€â”€ install_mcp.sh              # ä¸€é”®å®‰è£…è„šæœ¬
â”‚
â”œâ”€â”€ src/                        # æ ¸å¿ƒä»£ç 
â”‚   â”œâ”€â”€ batch_login.py          # Tokenç®¡ç†
â”‚   â”œâ”€â”€ manage_tokens.py        # TokenæŸ¥çœ‹
â”‚   â”œâ”€â”€ mineru_async.py         # å¼‚æ­¥å¤„ç†å™¨
â”‚   â”œâ”€â”€ mineru_batch_async.py   # æ‰¹é‡å¹¶è¡Œå¤„ç†
â”‚   â”œâ”€â”€ mineru_mcp_server.py    # MCPæœåŠ¡å™¨
â”‚   â”œâ”€â”€ split_large_file.py     # æ‹†åˆ†å·¥å…·
â”‚   â”œâ”€â”€ login_complete.py       # å•è´¦æˆ·ç™»å½•
â”‚   â””â”€â”€ renew_token.py          # Tokenç»­æœŸ
â”‚
â”œâ”€â”€ tools/                      # è¾…åŠ©å·¥å…·
â”‚   â”œâ”€â”€ mineru_rich_enhanced.py # Rich UIå¢å¼ºç‰ˆ
â”‚   â”œâ”€â”€ test_large_file_complete.py # è¶…å¤§æ–‡ä»¶æµ‹è¯•
â”‚   â””â”€â”€ ...
â”‚
â”œâ”€â”€ docs/                       # æ–‡æ¡£ç›®å½•
â”‚   â”œâ”€â”€ QUICK_START.md          # å¿«é€Ÿå¼€å§‹
â”‚   â”œâ”€â”€ MCP_INSTALLATION.md     # MCPå®‰è£…æŒ‡å—
â”‚   â”œâ”€â”€ MCP_DESIGN.md           # MCPè®¾è®¡æ–‡æ¡£
â”‚   â”œâ”€â”€ SECURITY_REPORT.md      # å®‰å…¨æŠ¥å‘Š
â”‚   â”œâ”€â”€ PROCESSING_FLOW.md      # å¤„ç†æµç¨‹
â”‚   â””â”€â”€ ...
â”‚
â”œâ”€â”€ config/                     # é…ç½®æ–‡ä»¶
â”‚   â””â”€â”€ accounts.yaml.example   # é…ç½®æ¨¡æ¿
â”‚
â””â”€â”€ tests/                      # æµ‹è¯•æ–‡ä»¶
    â”œâ”€â”€ test_all.py
    â””â”€â”€ test_workflow.sh
```

## ğŸ“š æ–‡æ¡£

- [å¿«é€Ÿå¼€å§‹æŒ‡å—](QUICK_START.md) - 5åˆ†é’Ÿå¿«é€Ÿå¼€å§‹
- [MCPå®‰è£…æŒ‡å—](MCP_INSTALLATION.md) - è¯¦ç»†çš„MCPé…ç½®
- [MCPè®¾è®¡æ–‡æ¡£](MCP_DESIGN.md) - MCPå·¥å…·è®¾è®¡
- [å®‰å…¨æ£€æŸ¥æŠ¥å‘Š](SECURITY_REPORT.md) - å®‰å…¨æ€§è¯´æ˜
- [å¤„ç†æµç¨‹è¯¦è§£](PROCESSING_FLOW.md) - å®Œæ•´å¤„ç†æµç¨‹
- [æ‹†åˆ†é€»è¾‘åˆ†æ](SPLIT_LOGIC_ANALYSIS.md) - æ™ºèƒ½æ‹†åˆ†ç®—æ³•

## ğŸ”„ ç‰ˆæœ¬å†å²

### v3.0.0 (2026-01-25) - å®Œæ•´ç”Ÿäº§çº§è§£å†³æ–¹æ¡ˆ
- âœ¨ æ‰¹é‡å¼‚æ­¥å¹¶è¡Œå¤„ç†ï¼ˆæ€§èƒ½æå‡10å€ï¼‰
- âœ¨ Rich UIå¢å¼ºç‰ˆï¼ˆè¯¦ç»†è¿›åº¦ã€å®æ—¶é€Ÿåº¦ã€é”™è¯¯è¯¦æƒ…ï¼‰
- âœ¨ ä¸€é”®å®‰è£…è„šæœ¬
- âœ¨ å®Œæ•´çš„å®‰å…¨æ£€æŸ¥
- âœ¨ æ‰€æœ‰åœºæ™¯å®Œæ•´è¦†ç›–

### v2.6.0 (2026-01-25) - çœŸæ­£çš„æ‰¹é‡å¼‚æ­¥å¹¶è¡Œ
- âœ¨ å¤šæ–‡ä»¶åŒæ—¶å¤„ç†ï¼ˆçœŸæ­£å¹¶å‘ï¼‰
- âœ¨ ä¿¡å·é‡æ§åˆ¶å¹¶å‘æ•°
- âœ¨ æ€»è¿›åº¦ + å•æ–‡ä»¶è¿›åº¦

### v2.4.0 (2026-01-25) - Rich UIå¢å¼ºç‰ˆ
- âœ¨ ç¾è§‚çš„å¯è§†åŒ–ç•Œé¢
- âœ¨ å®æ—¶è¿›åº¦æ˜¾ç¤º
- âœ¨ è¯¦ç»†çš„ç»Ÿè®¡ä¿¡æ¯

### v2.3.0 (2026-01-25) - å®Œå–„æ‰€æœ‰åœºæ™¯å¤„ç†é€»è¾‘
- âœ¨ æ™ºèƒ½æ‹†åˆ†ç®—æ³•
- âœ¨ 5ç§åœºæ™¯å®Œæ•´è¦†ç›–
- âœ¨ æ•°å­¦ä¸Šä¿è¯æ­£ç¡®

### v2.1.0 (2026-01-25) - çœŸæ­£å¼‚æ­¥å®ç°
- âœ¨ niquests AsyncSession
- âœ¨ æ€§èƒ½æå‡10å€
- âœ¨ HTTP/2+HTTP/3æ”¯æŒ

### v2.0.0 (2026-01-25) - MCPæœåŠ¡å™¨
- âœ¨ MCPæœåŠ¡å™¨å®ç°
- âœ¨ 5ä¸ªMCPå·¥å…·
- âœ¨ è‡ªç„¶è¯­è¨€äº¤äº’

### v1.4.0 (2026-01-25) - APIå°è£…
- âœ¨ APIå°è£…
- âœ¨ è´Ÿè½½å‡è¡¡

### v1.3.0 (2026-01-25) - æ‰¹é‡è´¦æˆ·ç®¡ç†
- âœ¨ æ‰¹é‡ç™»å½•åŠŸèƒ½

### v1.2.0 (2026-01-25) - å¤šè´¦æˆ·æ”¯æŒ
- âœ¨ å¤šè´¦æˆ·Tokenç®¡ç†
- âœ¨ å®‰å…¨å¢å¼º

## ğŸ¨ ç•Œé¢å±•ç¤º

### Rich UIç•Œé¢

```
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚  MinerU æ–‡æ¡£å¤„ç†ç³»ç»Ÿ            â”‚
â”‚  æ”¯æŒ PDF/PPTX/DOCX/å›¾ç‰‡        â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ æ–‡ä»¶ä¿¡æ¯ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚  ğŸ“„ æ–‡ä»¶  report.pdf           â”‚
â”‚  ğŸ“‹ æ ¼å¼  PDF                  â”‚
â”‚  ğŸ’¾ å¤§å°  9.4 MB               â”‚
â”‚  ğŸ“– é¡µæ•°  135 é¡µ               â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

â ‹ ğŸ“¤ ä¸Šä¼ æ–‡ä»¶... â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” 100% 9.9/9.9 MB
â ‹ âš™ï¸  å¤„ç†ä¸­...   â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  45% 60/135 é¡µ
â ‹ ğŸ“¥ ä¸‹è½½ç»“æœ... â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  80% 8.0/10.0 MB

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ å¤„ç†å®Œæˆ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚  âœ… Markdown  report.md        â”‚
â”‚  âœ… å›¾ç‰‡      report_images/   â”‚
â”‚  â±ï¸  è€—æ—¶      23.5ç§’          â”‚
â”‚  âš¡ é€Ÿåº¦      8.0 å›¾ç‰‡/ç§’      â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
```

### æ‰¹é‡å¤„ç†ç•Œé¢

```
ğŸ“Š æ€»è¿›åº¦                         â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” 100% (10/10)
âœ… doc1.pdf                       â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” 100%
âœ… doc2.pdf                       â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” 100%
âš™ï¸  doc3.pdf                      â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  45%

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                        ğŸ“Š å¤„ç†ç»“æœæ±‡æ€»                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ æ–‡ä»¶                 â”‚   çŠ¶æ€   â”‚  é¡µæ•° â”‚   å›¾ç‰‡ â”‚    è€—æ—¶ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ doc1.pdf             â”‚    âœ…    â”‚   135 â”‚    110 â”‚   28.6s â”‚
â”‚ doc2.pdf             â”‚    âœ…    â”‚    50 â”‚     25 â”‚   15.2s â”‚
â”‚ doc3.pdf             â”‚    âœ…    â”‚    80 â”‚     40 â”‚   20.1s â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ç»Ÿè®¡ä¿¡æ¯ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚  ğŸ“ æ€»æ–‡ä»¶æ•°    10             â”‚
â”‚  âœ… æˆåŠŸ        9              â”‚
â”‚  âŒ å¤±è´¥        1              â”‚
â”‚  ğŸ“– æ€»é¡µæ•°      1,250          â”‚
â”‚  ğŸ–¼ï¸  æ€»å›¾ç‰‡     850            â”‚
â”‚  â±ï¸  æ€»è€—æ—¶     45.3ç§’         â”‚
â”‚  ğŸ“Š å¹³å‡è€—æ—¶    4.5ç§’/æ–‡ä»¶     â”‚
â”‚  âš¡ å¤„ç†é€Ÿåº¦    27.6 é¡µ/ç§’     â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
```

## ğŸ¯ ä½¿ç”¨åœºæ™¯

### åœºæ™¯1: å•ä¸ªæ–‡æ¡£å¤„ç†

```python
from mineru_async import MinerUAsyncProcessor

processor = MinerUAsyncProcessor()
result = await processor.process_file("~/Documents/report.pdf")
```

### åœºæ™¯2: æ‰¹é‡æ–‡æ¡£å¤„ç†

```python
from mineru_batch_async import BatchAsyncProcessor

processor = BatchAsyncProcessor(max_concurrent=5)
results = await processor.process_files_parallel([
    "~/Documents/doc1.pdf",
    "~/Documents/doc2.pdf",
    "~/Documents/doc3.pdf"
])
```

### åœºæ™¯3: è¶…å¤§æ–‡ä»¶å¤„ç†

```bash
# è‡ªåŠ¨æ‹†åˆ†ã€å¹¶è¡Œå¤„ç†ã€åˆå¹¶
python3 test_large_file_complete.py ~/Documents/large_file.pdf
```

### åœºæ™¯4: MCPè‡ªç„¶è¯­è¨€äº¤äº’

```
ç”¨æˆ·: "å¸®æˆ‘å¤„ç†è¿™ä¸ªPDF ~/Documents/report.pdf"

AI: å¥½çš„ï¼Œæˆ‘æ¥å¤„ç†è¿™ä¸ªPDFæ–‡ä»¶ã€‚
    [è°ƒç”¨ process_document å·¥å…·]
    
    å¤„ç†å®Œæˆï¼æ–‡æ¡£å…±50é¡µï¼Œå·²è½¬æ¢ä¸ºMarkdownã€‚
    
    ä¸»è¦å†…å®¹ï¼š
    - ç¬¬ä¸€ç« ï¼šé¡¹ç›®æ¦‚è¿°
    - ç¬¬äºŒç« ï¼šæŠ€æœ¯æ–¹æ¡ˆ
    
    å®Œæ•´ç»“æœï¼š~/Documents/report.md
```

## ğŸ” Tokenç®¡ç†

### æ‰¹é‡ç™»å½•

> âš ï¸ **éœ€è¦å›¾å½¢ç•Œé¢ç¯å¢ƒ**ï¼ˆmacOS/Windows/Linuxæ¡Œé¢ï¼‰ï¼Œè„šæœ¬ä¼šæ‰“å¼€æµè§ˆå™¨çª—å£ã€‚

```bash
.venv/bin/python3 src/batch_login.py
```

**å…¨è‡ªåŠ¨æµç¨‹ï¼š**
1. è®¿é—® MinerU é¦–é¡µï¼Œç‚¹å‡»ç™»å½•æŒ‰é’®
2. è·³è½¬ SSO ç™»å½•é¡µï¼Œè‡ªåŠ¨å¡«å†™è´¦å·å¯†ç 
3. è‡ªåŠ¨ç‚¹å‡»é˜¿é‡Œäº‘éªŒè¯ç ï¼ˆ`#aliyunCaptcha-checkbox-icon`ï¼‰
4. éªŒè¯é€šè¿‡åè‡ªåŠ¨åˆ é™¤æ—§ Tokenã€åˆ›å»ºæ–° Token
5. ä¿å­˜åˆ° `all_tokens.json`

**è¯´æ˜ï¼š**
- å¤§éƒ¨åˆ†è´¦æˆ·éªŒè¯ç å…¨è‡ªåŠ¨é€šè¿‡ï¼Œä¸ªåˆ«å¯èƒ½éœ€æ‰‹åŠ¨ç‚¹å‡»
- çŸ­æ—¶é—´å†…è¿ç»­ç™»å½•è¿‡å¤šè´¦æˆ·å¯èƒ½è§¦å‘é£æ§ï¼Œé‡è¯•å³å¯
- Token æœ‰æ•ˆæœŸçº¦ 90 å¤©

### æŸ¥çœ‹TokençŠ¶æ€

```bash
python3 manage_tokens.py
```

### è‡ªåŠ¨è¿‡æœŸæ£€æµ‹

- ä»Tokenåç§°æå–åˆ›å»ºæ—¶é—´
- è‡ªåŠ¨è®¡ç®—å‰©ä½™å¤©æ•°
- æå‰1å¤©æç¤ºåˆ·æ–°

### è´Ÿè½½å‡è¡¡

- éšæœºé€‰æ‹©è´¦æˆ·
- åˆ†æ•£APIå‹åŠ›
- æé«˜å¯ç”¨æ€§

## ğŸ¤– MCPå·¥å…·

### process_document

å¤„ç†å•ä¸ªæ–‡æ¡£ï¼ˆæœ¬åœ°æ–‡ä»¶æˆ–URLï¼‰

**å‚æ•°**:
- `file_path` - æ–‡ä»¶è·¯å¾„æˆ–URLï¼ˆå¿…éœ€ï¼‰
- `model_version` - æ¨¡å‹ç‰ˆæœ¬ï¼ˆå¯é€‰ï¼‰
- `enable_formula` - å…¬å¼è¯†åˆ«ï¼ˆå¯é€‰ï¼‰
- `enable_table` - è¡¨æ ¼è¯†åˆ«ï¼ˆå¯é€‰ï¼‰

**è¿”å›**:
```json
{
  "source": "~/Documents/report.pdf",
  "output": {
    "markdown": "~/Documents/report.md",
    "images": "~/Documents/report_images"
  }
}
```

### process_directory

æ‰¹é‡å¤„ç†ç›®å½•ï¼ˆçœŸæ­£å¼‚æ­¥å¹¶è¡Œï¼‰

**å‚æ•°**:
- `directory` - ç›®å½•è·¯å¾„ï¼ˆå¿…éœ€ï¼‰
- `file_pattern` - æ–‡ä»¶è¿‡æ»¤å™¨ï¼ˆå¯é€‰ï¼‰

**è¿”å›**:
```json
{
  "total_files": 10,
  "success": 9,
  "failed": 1,
  "results": [...]
}
```

### get_token_status

æŸ¥è¯¢TokençŠ¶æ€

**è¿”å›**:
```json
[
  {
    "email": "user@example.com",
    "name": "è´¦å·1",
    "token_name": "token-20260125013352",
    "expired_at": "2026-02-07T17:33:52Z"
  }
]
```

## ğŸ“Š æ€§èƒ½ä¼˜åŒ–

### çœŸæ­£å¼‚æ­¥å¹¶å‘

ä½¿ç”¨ `niquests AsyncSession`ï¼Œæ‰€æœ‰HTTPè¯·æ±‚éƒ½æ˜¯å¼‚æ­¥çš„ï¼š

```python
async with AsyncSession() as session:
    # çœŸæ­£çš„å¼‚æ­¥è¯·æ±‚
    response = await session.post(...)
    response = await session.put(...)
    response = await session.get(...)
```

### æ‰¹é‡å¼‚æ­¥å¹¶è¡Œ

ä½¿ç”¨ `asyncio.Semaphore` æ§åˆ¶å¹¶å‘æ•°ï¼š

```python
semaphore = asyncio.Semaphore(max_concurrent)

async def process_one(file):
    async with semaphore:
        # å¤„ç†æ–‡ä»¶
        pass

# çœŸæ­£çš„å¹¶è¡Œå¤„ç†
results = await asyncio.gather(*[process_one(f) for f in files])
```

### æ™ºèƒ½æ‹†åˆ†ç®—æ³•

åŒæ—¶è€ƒè™‘æ–‡ä»¶å¤§å°å’Œé¡µæ•°ï¼š

```python
chunks_by_size = int(file_size / 180) + 1
chunks_by_pages = (total_pages + 599) // 600
chunk_count = max(chunks_by_size, chunks_by_pages)
```

æ•°å­¦ä¸Šä¿è¯æ¯ä¸ªåˆ†ç‰‡åŒæ—¶æ»¡è¶³å¤§å°å’Œé¡µæ•°é™åˆ¶ã€‚

## ğŸ”’ å®‰å…¨æ€§

### æ•æ„Ÿä¿¡æ¯ä¿æŠ¤

æ‰€æœ‰æ•æ„Ÿæ–‡ä»¶å·²è¢« `.gitignore` ä¿æŠ¤ï¼š

- `accounts.yaml` - è´¦æˆ·å¯†ç 
- `all_tokens.json` - Token
- `cookies.json` - Cookie
- `*.log` - æ—¥å¿—æ–‡ä»¶
- `.venv/` - è™šæ‹Ÿç¯å¢ƒ

### ä»£ç å®‰å…¨

- âœ… æ ¸å¿ƒä»£ç æ— ç¡¬ç¼–ç æ•æ„Ÿä¿¡æ¯
- âœ… æ‰€æœ‰æ•æ„Ÿä¿¡æ¯é€šè¿‡é…ç½®æ–‡ä»¶ç®¡ç†
- âœ… é…ç½®æ–‡ä»¶å·²è¢«.gitignoreä¿æŠ¤
- âœ… å¯ä»¥å®‰å…¨å…¬å¼€åˆ†äº«

è¯¦è§ [å®‰å…¨æ£€æŸ¥æŠ¥å‘Š](SECURITY_REPORT.md)

## ğŸ§ª æµ‹è¯•

### å®Œæ•´éªŒè¯é€šè¿‡

| æµ‹è¯•é¡¹ | æ–‡ä»¶ | ç»“æœ |
|--------|------|------|
| æœ¬åœ°PDF | 2601.12538.pdf (9.5MB, 135é¡µ) | âœ… |
| æœ¬åœ°PPTX | æ™ºèƒ½æ¹–ä»“.pptx (1.5MB, 1é¡µ) | âœ… |
| æœ¬åœ°DOCX | å­—èŠ‚æµè¿ç§»è°ƒä¼˜.docx (288KB, 25é¡µ) | âœ… |
| æœ¬åœ°å›¾ç‰‡ | å®æ—¶å¤§å±åº”ç”¨.jpg (98KB) | âœ… |
| è¶…å¤§PDF | ç²¾é€šElastic Stack.pdf (212MB, 422é¡µ) | âœ… |
| æ‰¹é‡å¤„ç† | 3æ–‡ä»¶å¹¶å‘ | âœ… |

### è¿è¡Œæµ‹è¯•

```bash
# å•æ–‡ä»¶æµ‹è¯•
python3 mineru_async.py ~/Documents/test.pdf

# æ‰¹é‡æµ‹è¯•
python3 mineru_batch_async.py ~/Documents "*.pdf"

# è¶…å¤§æ–‡ä»¶æµ‹è¯•
python3 test_large_file_complete.py ~/Documents/large.pdf
```

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤Issueå’ŒPull Requestï¼

## ğŸ“„ è®¸å¯è¯

MIT License

## ğŸ™ è‡´è°¢

- [MinerU](https://mineru.net) - æä¾›å¼ºå¤§çš„æ–‡æ¡£è§£æAPI
- [Anthropic](https://www.anthropic.com) - Model Context Protocol
- [niquests](https://niquests.readthedocs.io/) - ç°ä»£HTTPå®¢æˆ·ç«¯

## ğŸ“® è”ç³»æ–¹å¼

- GitHub: [@neosun100](https://github.com/neosun100)
- é¡¹ç›®åœ°å€: https://github.com/neosun100/mineru-mcp-server

---

<div align="center">

**â­ å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç»™ä¸ªStarï¼**

Made with â¤ï¸ by neosun100

</div>
